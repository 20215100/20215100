<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Expression Converter</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <h1>Expression Converter</h1>
        <nav>
            <ul>
                <li><a href="#" id="homeLink">Home</a></li>
                <li><a href="#" id="conceptLink">Concept</a></li>
                <li><a href="#" id="conversionLink">Conversion</a></li>
            </ul>
        </nav>
    </header>

    <div class="container">
        <!-- 홈 화면 -->
        <div class="home-content">
            <h2>Welcome to Expression Converter</h2>
            <p>This is the home page of Expression Converter. You can learn about expression conversion concepts and perform conversions.</p>
        </div>

        <!-- 개념 화면 -->
        <div class="concept-container">
            <h2>Concepts</h2>
            <p>Here, you can learn about expression conversion concepts.</p>
        </div>

        <!-- 변환 화면 -->
        <div class="conversion-container">
            <h2>Conversion</h2>
            <p>Enter an infix expression below and click "Convert" to see the postfix expression:</p>
            <div class="conversion-form">
                <input type="text" id="infixExpression" placeholder="Enter Infix Expression">
                <button id="convertButton">Convert</button>
            </div>
            <div class="conversion-result">
                <label for="postfixExpression">Postfix Expression:</label>
                <input type="text" id="postfixExpression" readonly>
            </div>
        </div>
    </div>

    <div id="treeContainer"></div>

    <script>
        /* Reset some default styles */
        body, h1, h2, p {
            margin: 0;
            padding: 0;
        }

        /* Style the header */
        header {
            background-color: #333;
            color: #fff;
            text-align: center;
            padding: 1rem 0;
        }

        header h1 {
            margin: 0;
        }

        nav ul {
            list-style: none;
        }

        nav ul li {
            display: inline;
            margin-right: 20px;
        }

        nav a {
            text-decoration: none;
            color: #fff;
            font-weight: bold;
        }

        /* Style the container */
        .container {
            max-width: 800px;
            margin: 2rem auto;
            padding: 1rem;
            border: 1px solid #ddd;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }

        /* Style each content section */
        .home-content, .concept-container, .conversion-container {
            display: none;
        }

        /* Style the conversion form */
        .conversion-form {
            display: flex;
            margin-top: 20px;
        }

        .conversion-form input[type="text"] {
            flex-grow: 1;
            padding: 5px;
            font-size: 16px;
        }

        .conversion-form button {
            background-color: #333;
            color: #fff;
            border: none;
            padding: 5px 15px;
            font-size: 16px;
            cursor: pointer;
        }

        /* Style the conversion result */
        .conversion-result {
            margin-top: 20px;
        }

        .conversion-result label {
            font-weight: bold;
        }

        .conversion-result input[type="text"] {
            width: 100%;
            padding: 5px;
            font-size: 16px;
        }
    </script>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            // 메뉴 링크 클릭 시 화면 전환
            const homeLink = document.getElementById("homeLink");
            const conceptLink = document.getElementById("conceptLink");
            const conversionLink = document.getElementById("conversionLink");

            homeLink.addEventListener("click", () => {
                showContent("home-content");
            });

            conceptLink.addEventListener("click", () => {
                showContent("concept-container");
            });

            conversionLink.addEventListener("click", () => {
                showContent("conversion-container");
            });

            function showContent(contentId) {
                const sections = document.querySelectorAll(".container > div");
                sections.forEach((section) => {
                    section.style.display = "none";
                });

                document.querySelector("." + contentId).style.display = "block";
            }

            // 중위에서 후위 표현식으로 변환
            const convertButton = document.getElementById("convertButton");
            convertButton.addEventListener("click", () => {
                const infixExpression = document.getElementById("infixExpression").value;
                const postfixExpression = infixToPostfix(infixExpression);
                document.getElementById("postfixExpression").value = postfixExpression;
            });

            function infixToPostfix(infix) {
                const precedence = {
                    "+": 1,
                    "-": 1,
                    "*": 2,
                    "/": 2,
                    "^": 3,
                };
                const output = [];
                const operatorStack = [];
                const tokens = infix.split(/\s+/).filter((token) => token !== "");

                tokens.forEach((token) => {
                    if (!isNaN(token)) {
                        // 피연산자일 경우, 바로 출력 큐에 추가합니다.
                        output.push(token);
                    } else if (token in precedence) {
                        // 연산자일 경우
                        while (
                            operatorStack.length > 0 &&
                            operatorStack[operatorStack.length - 1] !== "(" &&
                            precedence[operatorStack[operatorStack.length - 1]] >= precedence[token]
                        ) {
                            // 스택의 맨 위 연산자가 현재 연산자보다 높거나 같은 우선순위일 때까지 출력 큐로 이동합니다.
                            output.push(operatorStack.pop());
                        }
                        operatorStack.push(token);
                    } else if (token === "(") {
                        // 여는 괄호일 경우, 스택에 추가합니다.
                        operatorStack.push(token);
                    } else if (token === ")") {
                        // 닫는 괄호일 경우, 여는 괄호를 만날 때까지 스택의 연산자를 출력 큐로 이동합니다.
                        while (operatorStack.length > 0 && operatorStack[operatorStack.length - 1] !== "(") {
                            output.push(operatorStack.pop());
                        }
                        // 여는 괄호를 스택에서 제거합니다.
                        operatorStack.pop();
                    }
                });

                // 남아있는 모든 연산자를 출력 큐로 이동합니다.
                while (operatorStack.length > 0) {
                    output.push(operatorStack.pop());
                }

                // 후위 표현식을 문자열로 반환합니다.
                return output.join(" ");
            }
        });
    </script>
</body>
</html>
